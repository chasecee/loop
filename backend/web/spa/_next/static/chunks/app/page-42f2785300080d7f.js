(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7445:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ey});var a=s(5155),l=s(2115),r=s(4439),n=s(2596),i=s(9688);function o(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.QP)((0,n.$)(t))}let c=l.forwardRef((e,t)=>{let{className:s,children:l,...n}=e;return(0,a.jsxs)(r.bL,{ref:t,className:o("relative overflow-hidden",s),...n,children:[(0,a.jsx)(r.LM,{className:"h-full w-full rounded-[inherit]",children:l}),(0,a.jsx)(d,{}),(0,a.jsx)(r.OK,{})]})});c.displayName=r.bL.displayName;let d=l.forwardRef((e,t)=>{let{className:s,orientation:l="vertical",...n}=e;return(0,a.jsx)(r.VM,{ref:t,orientation:l,className:o("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...n,children:(0,a.jsx)(r.lr,{className:"relative flex-1 rounded-full bg-border"})})});d.displayName=r.VM.displayName;var u=s(6671);let m="/api";async function x(e){if(!e.ok){let t;try{let s=e.headers.get("content-type");if(s&&s.includes("application/json")){let s=await e.json();t=s.message||s.error||"HTTP ".concat(e.status)}else t=await e.text()}catch(s){t="HTTP ".concat(e.status,": ").concat(e.statusText)}throw Error(t)}let t=e.headers.get("content-type");if(t&&t.includes("application/json"))return e.json();throw Error("Expected JSON response but received HTML")}function f(e,t,s){let a=e.then(x);return u.o.promise(a,{loading:t,success:s||"Operation completed",error:e=>"Error: ".concat(e.message)}),a}async function h(){return x(await fetch("".concat(m,"/status")))}async function p(){return x(await fetch("".concat(m,"/media")))}async function g(){return x(await fetch("".concat(m,"/loop")))}async function v(){return x(await fetch("".concat(m,"/storage")))}async function j(e){return f(fetch("".concat(m,"/loop"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:e})}),"Adding to loop...","Added to loop")}async function b(e){return f(fetch("".concat(m,"/loop/").concat(e),{method:"DELETE"}),"Removing from loop...","Removed from loop")}async function y(e){let t=e.getAll("files");for(let e of t)if(e.size>0x1400000)throw Error('File "'.concat(e.name,'" exceeds ').concat(20,"MB limit"));return f(fetch("".concat(m,"/media"),{method:"POST",body:e}),"Uploading media...","Uploaded ".concat(t.length," file").concat(1!==t.length?"s":""))}async function N(e){return f(fetch("".concat(m,"/media/").concat(e,"/activate"),{method:"POST"}),"Activating media...","Media activated")}async function w(e){return f(fetch("".concat(m,"/media/").concat(e),{method:"DELETE"}),"Deleting media...","Media deleted")}async function k(){return f(fetch("".concat(m,"/playback/toggle"),{method:"POST"}),"Toggling playback...")}async function C(){return f(fetch("".concat(m,"/playback/next"),{method:"POST"}),"Skipping to next...")}async function S(){return f(fetch("".concat(m,"/playback/previous"),{method:"POST"}),"Skipping to previous...")}async function A(){return f(fetch("".concat(m,"/wifi/scan")),"Scanning for networks...","Networks found")}async function E(e,t){return f(fetch("".concat(m,"/wifi/connect"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ssid:e,password:t})}),"Connecting to ".concat(e,"..."),"Connected to ".concat(e))}async function F(){return f(fetch("".concat(m,"/wifi/hotspot"),{method:"POST"}),"Toggling hotspot...")}async function T(){return f(fetch("".concat(m,"/updates/check")),"Checking for updates...")}async function M(){return f(fetch("".concat(m,"/updates/install"),{method:"POST"}),"Installing update...","Update installed successfully")}var P=s(5143),D=s(402),L=s(8266);function O(e){let{item:t,isActive:s,onActivate:l,onRemove:r}=e,{attributes:n,listeners:i,setNodeRef:o,transform:c,transition:d,isDragging:u}=(0,D.gl)({id:t.slug}),m={transform:L.Ks.Transform.toString(c),transition:d,opacity:u?.5:1};return(0,a.jsx)("div",{ref:o,style:m,className:"group relative flex-shrink-0 w-80",children:(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-3xl transition-all duration-200 ".concat(s?"bg-accent shadow-lg":"bg-card hover:bg-accent/50"),children:[(0,a.jsx)("div",{...n,...i,className:"absolute top-4 left-4 z-10 cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)("div",{className:"rounded-xl bg-background/80 p-3 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"w-4 h-4 flex flex-col gap-1",children:[(0,a.jsx)("div",{className:"w-full h-0.5 bg-current rounded"}),(0,a.jsx)("div",{className:"w-full h-0.5 bg-current rounded"}),(0,a.jsx)("div",{className:"w-full h-0.5 bg-current rounded"})]})})}),(0,a.jsx)("button",{onClick:()=>r(t.slug),className:"absolute top-4 right-4 z-10 h-10 w-10 rounded-xl bg-background/80 backdrop-blur-sm opacity-0 group-hover:opacity-100 transition-opacity hover:bg-destructive hover:text-white flex items-center justify-center",children:"\xd7"}),(0,a.jsxs)("div",{className:"relative h-60 cursor-pointer overflow-hidden",onClick:()=>l(t.slug),children:[t.url&&t.type.startsWith("image/")?(0,a.jsx)("img",{src:t.url||"/placeholder.svg",alt:t.filename,className:"h-full w-full object-cover"}):(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-muted",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"□"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:t.type.split("/")[0].toUpperCase()})]})}),s&&(0,a.jsx)("div",{className:"absolute top-4 left-4",children:(0,a.jsx)("div",{className:"rounded-full bg-green-400 px-4 py-2 text-xs font-medium text-black",children:"Playing"})})]}),(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg truncate mb-2",children:t.filename}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(t.size/1024/1024).toFixed(1)," MB",t.duration&&" • ".concat(t.duration,"s")]})]})]})})}function I(e){let{item:t,isActive:s,isInLoop:l,onActivate:r,onDelete:n,onAddToLoop:i}=e,{attributes:o,listeners:c,setNodeRef:d,transform:u,transition:m,isDragging:x}=(0,D.gl)({id:t.slug}),f={transform:L.Ks.Transform.toString(u),transition:m,opacity:x?.5:1};return(0,a.jsxs)("div",{ref:d,style:f,className:"group flex items-center gap-8 p-8 transition-all ".concat(s?"bg-accent":"hover:bg-accent/30"),children:[(0,a.jsx)("div",{...o,...c,className:"cursor-grab active:cursor-grabbing opacity-30 hover:opacity-100 transition-opacity",children:(0,a.jsxs)("div",{className:"w-5 h-5 flex flex-col gap-1",children:[(0,a.jsx)("div",{className:"w-full h-0.5 bg-current rounded"}),(0,a.jsx)("div",{className:"w-full h-0.5 bg-current rounded"}),(0,a.jsx)("div",{className:"w-full h-0.5 bg-current rounded"})]})}),(0,a.jsx)("div",{className:"w-20 h-20 rounded-2xl overflow-hidden bg-muted flex-shrink-0",children:t.url&&t.type.startsWith("image/")?(0,a.jsx)("img",{src:t.url||"/placeholder.svg",alt:t.filename,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"□"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-lg truncate",children:t.filename}),s&&(0,a.jsx)("div",{className:"rounded-full bg-green-400 px-3 py-1 text-xs font-medium text-black",children:"Playing"}),l&&(0,a.jsx)("div",{className:"rounded-full bg-muted px-3 py-1 text-xs text-muted-foreground",children:"In Loop"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-8 text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{children:[(t.size/1024/1024).toFixed(1)," MB"]}),(0,a.jsx)("span",{children:new Date(t.uploadedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),t.duration&&(0,a.jsxs)("span",{children:[t.duration,"s"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)("button",{onClick:()=>i(t),disabled:l,className:"h-12 w-12 rounded-xl hover:bg-accent flex items-center justify-center disabled:opacity-30",title:l?"Already in loop":"Add to loop",children:(0,a.jsx)("span",{className:"text-lg",children:"+"})}),(0,a.jsx)("button",{onClick:()=>n(t.slug),className:"h-12 w-12 rounded-xl hover:bg-destructive hover:text-white flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg",children:"\xd7"})})]})]})}function R(e){var t;let{activeSlug:s,status:r,onCurrentlyPlayingChange:n}=e,[i,o]=(0,l.useState)([]),[m,x]=(0,l.useState)([]),[f,h]=(0,l.useState)(0),v=(0,P.FR)((0,P.MS)(P.AN),(0,P.MS)(P.uN,{coordinateGetter:D.JR}));(0,l.useEffect)(()=>{let e=async()=>{try{var e;let[t,s]=await Promise.all([p(),g()]),a=Array.isArray(t)?t:null!==(e=null==t?void 0:t.media)&&void 0!==e?e:[],l=[];Array.isArray(s)?l=s.length>0&&"object"==typeof s[0]?s:s.map(e=>a.find(t=>t.slug===e)).filter(Boolean):s&&Array.isArray(s.loop)&&(l=s.loop.length>0&&"object"==typeof s.loop[0]?s.loop:s.loop.map(e=>a.find(t=>t.slug===e)).filter(Boolean)),o(a),x(l)}catch(e){console.error("Failed to fetch data:",e)}};e();let t=setInterval(e,5e3);return()=>clearInterval(t)},[]),(0,l.useEffect)(()=>{let e=()=>{p().then(e=>{var t;o(Array.isArray(e)?e:null!==(t=null==e?void 0:e.media)&&void 0!==t?t:[])}).catch(console.error)};return window.addEventListener("mediaUploaded",e),()=>{window.removeEventListener("mediaUploaded",e)}},[]),(0,l.useEffect)(()=>{if((null==r?void 0:r.isPlaying)&&m.length>0){let e=setInterval(()=>{h(e=>(e+1)%m.length)},8e3);return()=>clearInterval(e)}},[null==r?void 0:r.isPlaying,m.length]),(0,l.useEffect)(()=>{n(m.length>0?m[f]:null)},[m,f,n]);let y=async e=>{try{await N(e);let t=m.findIndex(t=>t.slug===e);-1!==t&&h(t)}catch(e){u.o.error("Failed to play media")}},k=async e=>{try{await b(e),x(t=>{let s=t.filter(t=>t.slug!==e);return f>=s.length&&s.length>0&&h(0),s})}catch(e){u.o.error("Failed to remove from loop")}},C=async e=>{try{await w(e),o(t=>t.filter(t=>t.slug!==e)),x(t=>{let s=t.filter(t=>t.slug!==e);return f>=s.length&&s.length>0&&h(0),s})}catch(e){u.o.error("Failed to delete media")}},S=async e=>{try{await j(e.slug),x(t=>[...t,e])}catch(e){u.o.error("Failed to add to loop")}},A=m.map(e=>e.slug),E=m.length>0?null===(t=m[f])||void 0===t?void 0:t.slug:s;return(0,a.jsxs)("div",{className:"space-y-16 pb-24",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"On Loop"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:0===m.length?"Add media to your loop queue":"".concat(m.length," items in queue")})]}),0===m.length?(0,a.jsxs)("div",{className:"rounded-3xl bg-muted/20 py-32 text-center",children:[(0,a.jsx)("div",{className:"text-8xl mb-8",children:"○"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Empty queue"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Add media from your library below"})]}):(0,a.jsxs)(c,{className:"w-full",children:[(0,a.jsx)(P.Mp,{sensors:v,collisionDetection:P.fp,onDragEnd:e=>{let{active:t,over:s}=e;s&&t.id!==s.id&&x(e=>{let a=e.findIndex(e=>e.slug===t.id),l=e.findIndex(e=>e.slug===s.id);return a===f?h(l):a<f&&l>=f?h(f-1):a>f&&l<=f&&h(f+1),(0,D.be)(e,a,l)})},children:(0,a.jsx)(D.gB,{items:m.map(e=>e.slug),strategy:D.m$,children:(0,a.jsx)("div",{className:"flex gap-8 pb-4",children:m.map((e,t)=>(0,a.jsx)(O,{item:e,isActive:t===f,onActivate:y,onRemove:k},e.slug))})})}),(0,a.jsx)(d,{orientation:"horizontal"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Media Library"}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:[i.length," items"]})]}),0===i.length?(0,a.jsxs)("div",{className:"rounded-3xl bg-muted/20 py-32 text-center",children:[(0,a.jsx)("div",{className:"text-8xl mb-8",children:"□"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"No media"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Upload files to get started"})]}):(0,a.jsx)("div",{className:"rounded-3xl bg-card overflow-hidden",children:(0,a.jsx)(P.Mp,{sensors:v,collisionDetection:P.fp,onDragEnd:e=>{let{active:t,over:s}=e;s&&t.id!==s.id&&o(e=>{let a=e.findIndex(e=>e.slug===t.id),l=e.findIndex(e=>e.slug===s.id);return(0,D.be)(e,a,l)})},children:(0,a.jsx)(D.gB,{items:i.map(e=>e.slug),strategy:D._G,children:(0,a.jsx)("div",{className:"divide-y divide-border",children:i.map(e=>(0,a.jsx)(I,{item:e,isActive:e.slug===E,isInLoop:A.includes(e.slug),onActivate:y,onDelete:C,onAddToLoop:S},e.slug))})})})})]})]})}var z=s(9708),U=s(2085);let B=(0,U.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),_=l.forwardRef((e,t)=>{let{className:s,variant:l,size:r,asChild:n=!1,...i}=e,c=n?z.DX:"button";return(0,a.jsx)(c,{className:o(B({variant:l,size:r,className:s})),ref:t,...i})});_.displayName="Button";var H=s(5863);let V=l.forwardRef((e,t)=>{let{className:s,value:l,...r}=e;return(0,a.jsx)(H.bL,{ref:t,className:o("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...r,children:(0,a.jsx)(H.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});function J(e){let{status:t,currentlyPlaying:s,maxSizeMB:r}=e,[n,i]=(0,l.useState)(!1),[o,c]=(0,l.useState)(0),d=e=>{let t=1048576*r;if(e.filter(e=>e.size>t).length>0)return u.o.error("Files too large. Maximum ".concat(r,"MB")),!1;let s=["image/","video/"];return!(e.filter(e=>!s.some(t=>e.type.startsWith(t))).length>0)||(u.o.error("Unsupported file type"),!1)},m=(0,l.useCallback)(async e=>{if(0!==e.length&&d(e)){i(!0),c(0);try{let t=new FormData;Array.from(e).forEach(e=>{t.append("files",e)});let s=setInterval(()=>{c(e=>Math.min(e+10,90))},200);await y(t),clearInterval(s),c(100),window.dispatchEvent(new CustomEvent("mediaUploaded"))}catch(e){u.o.error("Upload failed")}finally{i(!1),setTimeout(()=>c(0),1e3)}}},[r]),x=(0,l.useCallback)(e=>{let t=e.target.files;t&&m(Array.from(t)),e.target.value=""},[m]),f=()=>{var e;if(n){i(!1),c(0);return}null===(e=document.getElementById("toolbar-file-input"))||void 0===e||e.click()};(0,l.useEffect)(()=>{let e=e=>{let{files:t}=e.detail;m(t)};return window.addEventListener("globalFileDrop",e),()=>{window.removeEventListener("globalFileDrop",e)}},[m]);let h=async()=>{try{await k()}catch(e){u.o.error("Failed to toggle playback")}},p=async()=>{try{await C()}catch(e){u.o.error("Failed to skip")}},g=async()=>{try{await S()}catch(e){u.o.error("Failed to skip")}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"file",multiple:!0,accept:"image/*,video/*,.gif",onChange:x,className:"hidden",id:"toolbar-file-input",disabled:n}),(0,a.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-black border-t border-gray-800",children:(0,a.jsx)("div",{className:"mx-auto max-w-6xl px-8 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-gray-800 flex-shrink-0",children:(null==s?void 0:s.url)&&s.type.startsWith("image/")?(0,a.jsx)("img",{src:s.url||"/placeholder.svg",alt:s.filename,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"□"})})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"text-white text-sm font-medium truncate",children:s?s.filename:"No media in loop"}),(0,a.jsx)("div",{className:"text-gray-400 text-xs",children:s?"Now Playing":"Add media to start"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 flex-shrink-0",children:[(0,a.jsx)("button",{onClick:()=>{let e=["none","one","all"],s=e.indexOf((null==t?void 0:t.loopMode)||"none"),a=e[(s+1)%e.length];u.o.success({none:"Loop disabled",one:"Loop current",all:"Loop all"}[a])},className:"h-8 w-8 rounded-lg flex items-center justify-center transition-colors ".concat((null==t?void 0:t.loopMode)&&"none"!==t.loopMode?"bg-gray-700 text-white":"text-gray-400 hover:text-white"),children:(0,a.jsx)("span",{className:"text-sm",children:"↻"})}),(0,a.jsx)("button",{onClick:g,className:"h-8 w-8 rounded-lg flex items-center justify-center text-gray-400 hover:text-white transition-colors",children:(0,a.jsx)("span",{className:"text-lg",children:"‹"})}),(0,a.jsx)("button",{onClick:h,className:"h-10 w-10 rounded-full bg-white text-black hover:bg-gray-100 transition-colors flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg",children:(null==t?void 0:t.isPlaying)?"⏸":"▶"})}),(0,a.jsx)("button",{onClick:p,className:"h-8 w-8 rounded-lg flex items-center justify-center text-gray-400 hover:text-white transition-colors",children:(0,a.jsx)("span",{className:"text-lg",children:"›"})})]}),(0,a.jsx)("div",{className:"flex items-center justify-end flex-1",children:n?(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-32",children:(0,a.jsx)(V,{value:o,className:"h-1"})}),(0,a.jsx)("button",{onClick:f,className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Cancel"})]}):(0,a.jsx)(_,{onClick:f,className:"bg-white text-black hover:bg-gray-100 rounded-full px-6 py-2 text-sm font-medium transition-colors",children:"+ Add Media"})})]})})})]})}V.displayName=H.bL.displayName;var W=s(2283),G=s(4416);let q=W.bL,K=W.l9,X=W.ZL;W.bm;let Y=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(W.hJ,{ref:t,className:o("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l})});Y.displayName=W.hJ.displayName;let $=l.forwardRef((e,t)=>{let{className:s,children:l,...r}=e;return(0,a.jsxs)(X,{children:[(0,a.jsx)(Y,{}),(0,a.jsxs)(W.UC,{ref:t,className:o("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[l,(0,a.jsxs)(W.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(G.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});$.displayName=W.UC.displayName;let Q=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:o("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};Q.displayName="DialogHeader";let Z=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(W.hE,{ref:t,className:o("text-lg font-semibold leading-none tracking-tight",s),...l})});Z.displayName=W.hE.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(W.VY,{ref:t,className:o("text-sm text-muted-foreground",s),...l})}).displayName=W.VY.displayName;let ee=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:o("rounded-lg border bg-card text-card-foreground shadow-sm",s),...l})});ee.displayName="Card";let et=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:o("flex flex-col space-y-1.5 p-6",s),...l})});et.displayName="CardHeader";let es=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:o("text-2xl font-semibold leading-none tracking-tight",s),...l})});es.displayName="CardTitle",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:o("text-sm text-muted-foreground",s),...l})}).displayName="CardDescription";let ea=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:o("p-6 pt-0",s),...l})});ea.displayName="CardContent",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:o("flex items-center p-6 pt-0",s),...l})}).displayName="CardFooter";let el=(0,U.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function er(e){let{className:t,variant:s,...l}=e;return(0,a.jsx)("div",{className:o(el({variant:s}),t),...l})}let en=l.forwardRef((e,t)=>{let{className:s,type:l,...r}=e;return(0,a.jsx)("input",{type:l,className:o("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...r})});en.displayName="Input";var ei=s(968);let eo=(0,U.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ec=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(ei.b,{ref:t,className:o(eo(),s),...l})});ec.displayName=ei.b.displayName;var ed=s(2652),eu=s(6517),em=s(4449),ex=s(2919);function ef(){let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)(!1),[n,i]=(0,l.useState)(!1),[o,c]=(0,l.useState)(null),[d,m]=(0,l.useState)(""),[x,f]=(0,l.useState)({connected:!0,ssid:"MyWiFi",hotspotActive:!1});(0,l.useEffect)(()=>{let e=async()=>{try{let e=await h();(null==e?void 0:e.wifi)&&f({connected:!!e.wifi.connected,ssid:e.wifi.current_ssid||"",hotspotActive:!!e.wifi.hotspot_active})}catch(e){}};e();let t=setInterval(e,5e3);return()=>clearInterval(t)},[]);let p=async()=>{r(!0);try{let e=await A();t(e),u.o.success("Found ".concat(e.length," networks"))}catch(e){u.o.error("Failed to scan for networks")}finally{r(!1)}},g=async()=>{if(o){i(!0);try{await E(o.ssid,d),u.o.success("Connected to ".concat(o.ssid)),f(e=>({...e,connected:!0,ssid:o.ssid})),c(null),m("")}catch(e){u.o.error("Failed to connect to network")}finally{i(!1)}}},v=async()=>{try{await F();let e=!x.hotspotActive;f(t=>({...t,hotspotActive:e})),u.o.success(e?"Hotspot enabled":"Hotspot disabled")}catch(e){u.o.error("Failed to toggle hotspot")}},j=e=>e>75?(0,a.jsx)(ed.A,{className:"h-4 w-4"}):e>50?(0,a.jsx)(ed.A,{className:"h-4 w-4 opacity-75"}):e>25?(0,a.jsx)(ed.A,{className:"h-4 w-4 opacity-50"}):(0,a.jsx)(ed.A,{className:"h-4 w-4 opacity-25"});return(0,a.jsxs)(ee,{children:[(0,a.jsx)(et,{children:(0,a.jsx)(es,{children:"WiFi Configuration"})}),(0,a.jsxs)(ea,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[x.connected?(0,a.jsx)(eu.A,{className:"h-5 w-5 text-green-500"}):(0,a.jsx)(em.A,{className:"h-5 w-5 text-red-500"}),(0,a.jsx)("span",{className:"font-medium",children:x.connected?'Connected to "'.concat(x.ssid,'"'):"Not connected"})]}),x.hotspotActive&&(0,a.jsx)(er,{variant:"secondary",children:"Hotspot Active"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(_,{onClick:p,disabled:s,variant:"outline",children:s?"Scanning...":"Scan for Networks"}),(0,a.jsx)(_,{onClick:v,variant:x.hotspotActive?"destructive":"outline",children:x.hotspotActive?"Disable Hotspot":"Enable Hotspot"})]}),e.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Available Networks"}),(0,a.jsx)("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:e.map(e=>(0,a.jsxs)(q,{children:[(0,a.jsx)(K,{asChild:!0,children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg cursor-pointer hover:bg-accent",onClick:()=>c(e),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"font-medium",children:e.ssid}),e.secured&&(0,a.jsx)(ex.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[j(e.signal),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.signal,"%"]})]})]})}),(0,a.jsxs)($,{children:[(0,a.jsx)(Q,{children:(0,a.jsxs)(Z,{children:["Connect to ",e.ssid]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[e.secured&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(ec,{htmlFor:"password",children:"Password"}),(0,a.jsx)(en,{id:"password",type:"password",value:d,onChange:e=>m(e.target.value),placeholder:"Enter network password"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(_,{variant:"outline",onClick:()=>c(null),children:"Cancel"}),(0,a.jsx)(_,{onClick:g,disabled:n||e.secured&&!d,children:n?"Connecting...":"Connect"})]})]})]})]},e.ssid))})]})]})]})}var eh=s(646),ep=s(1788);function eg(){let[e]=(0,l.useState)("1.0.0"),[t,s]=(0,l.useState)(null),[r,n]=(0,l.useState)(!1),[i,o]=(0,l.useState)(!1),c=async()=>{n(!0);try{let e=await T();e.available?(s(e.version),u.o.success("Update ".concat(e.version," available"))):u.o.success("System is up to date")}catch(e){u.o.error("Failed to check for updates")}finally{n(!1)}},d=async()=>{if(t){o(!0);try{await M(),u.o.success("Update installed - device will restart"),s(null)}catch(e){u.o.error("Failed to install update")}finally{o(!1)}}};return(0,a.jsxs)(ee,{children:[(0,a.jsx)(et,{children:(0,a.jsx)(es,{children:"System & Updates"})}),(0,a.jsxs)(ea,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eh.A,{className:"h-5 w-5 text-green-500"}),(0,a.jsx)("span",{className:"font-medium",children:"Current Version"})]}),(0,a.jsx)(er,{variant:"outline",children:e})]}),t&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-primary/5 border border-primary/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ep.A,{className:"h-5 w-5 text-primary"}),(0,a.jsx)("span",{className:"font-medium",children:"Update Available"})]}),(0,a.jsx)(er,{children:t})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(_,{onClick:c,disabled:r,variant:"outline",children:r?"Checking...":"Check for Updates"}),(0,a.jsx)(_,{onClick:d,disabled:!t||i,children:i?"Installing...":"Install Update"})]}),t&&(0,a.jsxs)("div",{className:"text-sm text-muted-foreground p-3 bg-muted rounded-lg",children:[(0,a.jsx)("strong",{children:"Note:"})," The device will automatically restart after the update is installed. Make sure no critical operations are running."]})]})]})}function ev(){let e;let[t,s]=(0,l.useState)(null);if((0,l.useEffect)(()=>{let e=async()=>{try{let e=await v();s(e)}catch(e){console.error("Failed to fetch storage info:",e)}};e();let t=setInterval(e,1e4);return()=>clearInterval(t)},[]),!t)return null;let r=e=>0===e?"0 GB":"".concat((e/0x40000000).toFixed(1)," GB"),n=t.system/t.total*100,i=t.app/t.total*100,o=t.media/t.total*100;return t.free,t.total,(0,a.jsxs)("div",{className:"rounded-3xl bg-card p-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-8",children:"Storage"}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[r(t.used)," of ",r(t.total)," used"]}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[r(t.free)," available"]})]}),(0,a.jsxs)("div",{className:"h-2 bg-muted rounded-full overflow-hidden flex",children:[(0,a.jsx)("div",{className:"bg-blue-500 h-full",style:{width:"".concat(n,"%")}}),(0,a.jsx)("div",{className:"bg-purple-500 h-full",style:{width:"".concat(i,"%")}}),(0,a.jsx)("div",{className:"bg-green-500 h-full",style:{width:"".concat(o,"%")}})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,a.jsx)("span",{className:"text-sm",children:"System"})]}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:r(t.system)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),(0,a.jsx)("span",{className:"text-sm",children:"LOOP App"})]}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:r(t.app)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,a.jsx)("span",{className:"text-sm",children:"Media Files"})]}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:r(t.media)})]})]})]})}function ej(e){let{isOpen:t,onClose:s}=e;return(0,a.jsx)(q,{open:t,onOpenChange:s,children:(0,a.jsx)($,{className:"max-w-4xl max-h-[90vh] overflow-y-auto p-0",children:(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsx)("h2",{className:"text-3xl font-semibold",children:"Settings"}),(0,a.jsx)("button",{onClick:s,className:"h-10 w-10 rounded-xl hover:bg-accent flex items-center justify-center text-muted-foreground hover:text-foreground",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(ev,{}),(0,a.jsx)(ef,{}),(0,a.jsx)(eg,{})]})]})})})}function eb(e){let{isVisible:t,maxSizeMB:s}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-background/60 backdrop-blur-md",children:(0,a.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,a.jsxs)("div",{className:"rounded-3xl bg-card p-20 text-center shadow-2xl",children:[(0,a.jsx)("div",{className:"text-6xl mb-8",children:"↓"}),(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Drop to upload"}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:["Maximum ",s,"MB per file"]})]})})}):null}function ey(){let[e,t]=(0,l.useState)(null),[s,r]=(0,l.useState)(!1),[n,i]=(0,l.useState)(!1),[o,c]=(0,l.useState)(0),[d,u]=(0,l.useState)(!1),[m,x]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=async()=>{try{let e=await h();t(e),r(!0)}catch(e){r(!1)}};e();let s=setInterval(e,2e3);return()=>clearInterval(s)},[]);let f=(0,l.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),c(e=>e+1),e.dataTransfer.items&&e.dataTransfer.items.length>0&&i(!0)},[]),p=(0,l.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),c(e=>{let t=e-1;return 0===t&&i(!1),t})},[]),g=(0,l.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),v=(0,l.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),i(!1),c(0);let t=Array.from(e.dataTransfer.files);if(t.length>0){let e=new CustomEvent("globalFileDrop",{detail:{files:t}});window.dispatchEvent(e)}},[]);return(0,a.jsxs)("div",{className:"min-h-screen bg-background",onDragEnter:f,onDragLeave:p,onDragOver:g,onDrop:v,children:[(0,a.jsx)(eb,{isVisible:n,maxSizeMB:20}),(0,a.jsx)("header",{className:"border-b border-border",children:(0,a.jsx)("div",{className:"mx-auto max-w-6xl px-8 py-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-3xl font-semibold",children:"LOOP"}),(0,a.jsxs)("div",{className:"flex items-center gap-8",children:[(0,a.jsx)("button",{onClick:()=>u(!0),className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:"Settings"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"h-2 w-2 rounded-full ".concat(s?"bg-green-400":"bg-red-400")}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:s?"Connected":"Offline"})]})]})]})})}),(0,a.jsx)("main",{className:"mx-auto max-w-6xl px-8 py-12",children:(0,a.jsx)(R,{activeSlug:null==e?void 0:e.activeMedia,status:e,onCurrentlyPlayingChange:x})}),(0,a.jsx)(J,{status:e,currentlyPlaying:m,maxSizeMB:20}),(0,a.jsx)(ej,{isOpen:d,onClose:()=>u(!1)})]})}},7987:(e,t,s)=>{Promise.resolve().then(s.bind(s,7445))}},e=>{var t=t=>e(e.s=t);e.O(0,[671,515,441,684,358],()=>t(7987)),_N_E=e.O()}]);