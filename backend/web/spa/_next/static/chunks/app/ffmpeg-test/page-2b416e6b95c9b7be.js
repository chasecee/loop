(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[49],{2262:(e,t,a)=>{Promise.resolve().then(a.bind(a,5525))},5525:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var i=a(5155),l=a(2115);let r=null,n=null;async function s(){if(r){if(r.loaded)return r;if(n)return await n,r}let{FFmpeg:e}=await a.e(654).then(a.bind(a,5654));return n=(r=new e).load({corePath:"/ffmpeg/umd/ffmpeg-core.js",log:!0}),await n,n=null,console.info("[FFmpeg] Core ready"),r}function o(e){let{title:t,accept:a,inputId:r,action:n,width:o="w-full"}=e,[c,u]=(0,l.useState)(!1),[d,p]=(0,l.useState)(!1),[f,m]=(0,l.useState)(!1),[w,x]=(0,l.useState)(0),[g,b]=(0,l.useState)([]),[h,y]=(0,l.useState)(null),[v,j]=(0,l.useState)(null),F=async()=>{if(c||d)return;p(!0);let e=await s();e._widgetHooked||(e.on("progress",e=>{let{progress:t}=e;x(t)}),e.on("log",e=>{let{message:t}=e;b(e=>[...e.slice(-100),t])}),e._widgetHooked=!0),u(!0),p(!1)},N=async e=>{let t=await s();m(!0),x(0),b([]),y(null);let{blob:a,url:i}=await n(t,e,x,b);a&&(j(a.type),y(URL.createObjectURL(a))),i&&(j(null),y(i)),m(!1),x(1)};return(0,i.jsxs)("section",{className:"flex flex-col items-center gap-2 max-w-md",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-center",children:t}),!c&&(0,i.jsx)("button",{onClick:F,disabled:d,className:"px-4 py-2 bg-purple-600 text-white rounded disabled:opacity-50",children:d?"Downloading FFmpeg…":"Load FFmpeg (~35 MB)"}),c&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("label",{htmlFor:r,className:"px-4 py-2 bg-blue-600 text-white rounded cursor-pointer hover:bg-blue-700",children:"Select File"}),(0,i.jsx)("input",{id:r,type:"file",accept:a,className:"hidden",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&N(a)}})]}),f&&(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)("div",{className:"w-full bg-gray-200 h-2 rounded",children:(0,i.jsx)("div",{className:"bg-blue-600 h-2 rounded",style:{width:"".concat(Math.round(100*w),"%")}})}),(0,i.jsxs)("p",{className:"text-xs text-center mt-1",children:[Math.round(100*w),"%"]}),(0,i.jsx)("pre",{className:"text-xs bg-black text-green-400 p-2 mt-2 h-32 overflow-y-auto whitespace-pre-wrap",children:g.join("\n")})]}),h&&((null==v?void 0:v.startsWith("image/"))?(0,i.jsx)("img",{src:h,className:"".concat(o," mt-3 border rounded")}):(null==v?void 0:v.startsWith("video/"))?(0,i.jsx)("video",{src:h,controls:!0,className:"".concat(o," mt-3 border rounded")}):(0,i.jsx)("a",{href:h,download:(null==v?void 0:v.includes("octet"))?"output.rgb":"output.bin",className:"mt-3 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Download Result"}))]})}async function c(e,t,a,i){let l="input.gif",r="output.mp4";return await e.writeFile(l,new Uint8Array(await t.arrayBuffer())),await e.exec(["-i",l,r]),{blob:new Blob([(await e.readFile(r)).buffer],{type:"video/mp4"})}}async function u(e,t,a,i){let l="input.mp4",r="output.gif";return await e.writeFile(l,new Uint8Array(await t.arrayBuffer())),await e.exec(["-i",l,"-vf","fps=".concat(25,",scale=320:240:force_original_aspect_ratio=increase,crop=320:240"),r]),{blob:new Blob([(await e.readFile(r)).buffer],{type:"image/gif"})}}async function d(e,t,a,i){let l="input.mp4",r="output.rgb";return await e.writeFile(l,new Uint8Array(await t.arrayBuffer())),await e.exec(["-i",l,"-vf","fps=".concat(25,",scale=320:240:force_original_aspect_ratio=increase,crop=320:240"),"-f","rawvideo","-pix_fmt","rgb565",r]),{blob:new Blob([(await e.readFile(r)).buffer],{type:"application/octet-stream"})}}async function p(e,t,a,i){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:320,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:240,n="input.rgb";return await e.writeFile(n,new Uint8Array(await t.arrayBuffer())),await e.exec(["-f","rawvideo","-pix_fmt","rgb565","-s","".concat(l,"x").concat(r),"-i",n,"-pix_fmt","yuv420p","output.mp4"]),{blob:new Blob([(await e.readFile("output.mp4")).buffer],{type:"video/mp4"})}}function f(){return(0,i.jsxs)("main",{className:"p-6 flex flex-col items-center gap-6",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold",children:"GIF to MP4 Conversion (Client-side Test)"}),(0,i.jsxs)("div",{className:"flex flex-col md:flex-row flex-wrap gap-8 w-full",children:[(0,i.jsx)(o,{title:"GIF → MP4",accept:"image/gif",inputId:"gifmp4",action:c}),(0,i.jsx)(o,{title:"MP4 → GIF",accept:"video/mp4",inputId:"mp4gif",action:u}),(0,i.jsx)(o,{title:"MP4 → RGB565 (.rgb)",accept:"video/mp4",inputId:"mp4rgb",action:d}),(0,i.jsx)(o,{title:"RGB565 → MP4",accept:"application/octet-stream",inputId:"rgbmp4",action:(e,t,a,i)=>p(e,t,a,i)})]}),(0,i.jsx)("p",{className:"text-sm text-gray-500 max-w-prose text-center",children:"This runs entirely in your browser using FFmpeg.wasm. Keep files short (< 10\xa0MB / < 10\xa0s) to avoid long load times and excessive memory usage."})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(2262)),_N_E=e.O()}]);