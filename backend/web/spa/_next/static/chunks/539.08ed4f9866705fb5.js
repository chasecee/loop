(()=>{var e={3539:(e,t,r)=>{"use strict";let a=null,o=null;async function n(){if(a){if(a.loaded)return a;if(o)return await o,a}let{FFmpeg:e}=await r.e(654).then(r.bind(r,5654));return o=(a=new e).load({corePath:"/ffmpeg/umd/ffmpeg-core.js",log:!0}),await o,o=null,console.info("[FFmpeg] Core ready"),a}var l=r(9311),i=r.n(l);async function s(e){var t,r,a;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=await n();l._convHooked||(l.on("log",e=>{var t;let{message:r}=e;null===(t=o.onLog)||void 0===t||t.call(o,r)}),l.on("progress",e=>{var t;let{progress:r}=e;null===(t=o.onProgress)||void 0===t||t.call(o,80*r)}),l._convHooked=!0);let s="input_".concat(crypto.randomUUID()),c="fps=".concat(25,",scale=").concat(320,":").concat(240,":force_original_aspect_ratio=increase,crop=").concat(320,":").concat(240);await l.writeFile(s,new Uint8Array(await e.arrayBuffer()));let f="output.raw";await l.exec(["-i",s,"-an","-threads","1","-vf",c,"-f","rawvideo","-pix_fmt","rgb565le",f]);let u=await l.readFile(f),d=Math.floor(u.length/153600),p=new(i());for(let e=0;e<d;e++){let t=153600*e,r=t+153600,n=u.subarray(t,r);if(p.file("frame_".concat((e+1).toString().padStart(6,"0"),".rgb"),function(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=2)t[r]=e[r+1],t[r+1]=e[r];return t}(n)),e%10==0){let t=80+e/d*10;null===(a=o.onProgress)||void 0===a||a.call(o,t)}}let g=e.name.replace(/\.[^./]+$/,"").replace(/\s+/g,"_").toLowerCase().concat("_",crypto.randomUUID().slice(0,8)),v=Array.from({length:d},(e,t)=>"frame_".concat((t+1).toString().padStart(6,"0"),".rgb")),y={slug:g,original_filename:e.name,type:"video",width:320,height:240,frame_count:d,frames:v,durations:Array(d).fill(.04),format:"rgb565",fps:25};p.file("metadata.json",JSON.stringify(y)),null===(t=o.onProgress)||void 0===t||t.call(o,95);let h=await p.generateAsync({type:"blob"});null===(r=o.onProgress)||void 0===r||r.call(o,100),await l.deleteFile(s),await l.deleteFile(f);try{await l.exit()}catch(e){}return{slug:g,blob:h}}self.onmessage=async e=>{let{id:t,file:r}=e.data;try{let{blob:e}=await s(r,{onProgress:e=>{self.postMessage({id:t,progress:e})}});self.postMessage({id:t,done:!0,blob:e})}catch(e){self.postMessage({id:t,error:(null==e?void 0:e.message)||"Conversion failed"})}}}},t={};function r(a){var o=t[a];if(void 0!==o)return o.exports;var n=t[a]={exports:{}},l=!0;try{e[a](n,n.exports,r),l=!1}finally{l&&delete t[a]}return n.exports}r.m=e,r.x=()=>{var e=r.O(void 0,[311],()=>r(3539));return r.O(e)},(()=>{var e=[];r.O=(t,a,o,n)=>{if(a){n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[a,o,n];return}for(var i=1/0,l=0;l<e.length;l++){for(var[a,o,n]=e[l],s=!0,c=0;c<a.length;c++)(!1&n||i>=n)&&Object.keys(r.O).every(e=>r.O[e](a[c]))?a.splice(c--,1):(s=!1,n<i&&(i=n));if(s){e.splice(l--,1);var f=o();void 0!==f&&(t=f)}}return t}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((t,a)=>(r.f[a](e,t),t),[])),r.u=e=>"static/chunks/"+e+"."+({311:"6a3fa4752e40d071",361:"4c29c778157e8c02",654:"aba95996346c3a94"})[e]+".js",r.miniCssF=e=>{},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;r.tt=()=>(void 0===e&&(e={createScriptURL:e=>e},"undefined"!=typeof trustedTypes&&trustedTypes.createPolicy&&(e=trustedTypes.createPolicy("nextjs#bundler",e))),e)})(),r.tu=e=>r.tt().createScriptURL(e),r.p="/_next/",(()=>{r.b=self.location+"/../../../";var e={539:1};r.f.i=(t,a)=>{e[t]||importScripts(r.tu(r.p+r.u(t)))};var t=self.webpackChunk_N_E=self.webpackChunk_N_E||[],a=t.push.bind(t);t.push=t=>{var[o,n,l]=t;for(var i in n)r.o(n,i)&&(r.m[i]=n[i]);for(l&&l(r);o.length;)e[o.pop()]=1;a(t)}})(),(()=>{var e=r.x;r.x=()=>r.e(311).then(e)})(),_N_E=r.x()})();