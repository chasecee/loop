"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[617],{2617:(e,t,l)=>{l.r(t),l.d(t,{default:()=>i});var a=l(5155),s=l(2115);let n=null,r=null,o=null;async function d(){if(n){if(n.loaded)return n;if(r)return await r,n}let{FFmpeg:e}=await l.e(654).then(l.bind(l,5654));return r=(n=new e).load({corePath:"/ffmpeg/umd/ffmpeg-core.js",log:!0}),await r,r=null,console.info("[FFmpeg] Core ready"),n}function i(e){let{title:t,accept:l,inputId:n,action:r,width:o="w-full"}=e,[i,c]=(0,s.useState)(!1),[u,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[g,x]=(0,s.useState)(0),[b,w]=(0,s.useState)([]),[f,j]=(0,s.useState)(null),[v,N]=(0,s.useState)(null),y=async()=>{if(i||u)return;h(!0);let e=await d();e._widgetHooked||(e.on("progress",e=>{let{progress:t}=e;x(t)}),e.on("log",e=>{let{message:t}=e;w(e=>[...e.slice(-100),t])}),e._widgetHooked=!0),c(!0),h(!1)},F=async e=>{let t=await d();p(!0),x(0),w([]),j(null);let{blob:l,url:a}=await r(t,e,x,w);l&&(N(l.type),j(URL.createObjectURL(l))),a&&(N(null),j(a)),p(!1),x(1)};return(0,a.jsxs)("section",{className:"flex flex-col items-center gap-2 max-w-md",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-center",children:t}),!i&&(0,a.jsx)("button",{onClick:y,disabled:u,className:"px-4 py-2 bg-purple-600 text-white rounded disabled:opacity-50",children:u?"Downloading FFmpegâ€¦":"Load FFmpeg (~35 MB)"}),i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("label",{htmlFor:n,className:"px-4 py-2 bg-blue-600 text-white rounded cursor-pointer hover:bg-blue-700",children:"Select File"}),(0,a.jsx)("input",{id:n,type:"file",accept:l,className:"hidden",onChange:e=>{var t;let l=null===(t=e.target.files)||void 0===t?void 0:t[0];l&&F(l)}})]}),m&&(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 h-2 rounded",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded",style:{width:"".concat(Math.round(100*g),"%")}})}),(0,a.jsxs)("p",{className:"text-xs text-center mt-1",children:[Math.round(100*g),"%"]}),(0,a.jsx)("pre",{className:"text-xs bg-black text-green-400 p-2 mt-2 h-32 overflow-y-auto whitespace-pre-wrap",children:b.join("\n")})]}),f&&((null==v?void 0:v.startsWith("image/"))?(0,a.jsx)("img",{src:f,className:"".concat(o," mt-3 border rounded")}):(null==v?void 0:v.startsWith("video/"))?(0,a.jsx)("video",{src:f,controls:!0,className:"".concat(o," mt-3 border rounded")}):(0,a.jsx)("a",{href:f,download:(null==v?void 0:v.includes("octet"))?"output.rgb":"output.bin",className:"mt-3 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Download Result"}))]})}}}]);